<html lang="en">
  <head>
    <meta charset="utf-8"></meta>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>
    <meta name="generator" content="VueGo"></meta>
    <title>Some Things About Keyframes</title>
    <meta name="description"></meta>
    <link rel="canonical"></link>
    <meta name="author" content="Tit Petric"></meta>
    <link rel="icon" href="/assets/favicon/favicon.ico" sizes="32x32"></link>
    <link rel="icon" href="/assets/favicon/favicon.svg" type="image/svg+xml"></link>
    <link rel="apple-touch-icon" href="/assets/favicon/apple-touch-icon.png"></link>
    <link rel="manifest" href="/assets/site.webmanifest"></link>
    <meta name="twitter:card" content="summary_large_image"></meta>
    <meta name="twitter:title"></meta>
    <meta name="twitter:description"></meta>
    <meta name="twitter:image"></meta>
    <meta name="og:title"></meta>
    <meta name="og:description"></meta>
    <meta property="og:image"></meta>
    <meta name="fediverse:creator" content="@hexagoncircle@fosstodon.org"></meta>
    <link href="https://github.com/hexagoncircle" rel="me"></link>
    <link href="https://twitter.com/hexagoncircle" rel="me"></link>
    <link href="https://fosstodon.org/@hexagoncircle" rel="me"></link>
    <link href="https://codepen.io/hexagoncircle" rel="me"></link>
    <link rel="webmention" href="https://webmention.io/ryanmulligan.dev/webmention"></link>
    <link rel="pingback" href="https://webmention.io/ryanmulligan.dev/xmlrpc"></link>
    <link rel="alternate" type="application/atom+xml" title="Ryan Mulligan"></link>
    <link rel="stylesheet" href="/assets/css/themes.css"></link>
    <link rel="stylesheet" href="/assets/css/styles.css"></link>
    <style></style>
  </head>
  <body>
    <script>
  (function () {
    let root = document.documentElement;
    let body = document.body;

    let appearance = localStorage.getItem("appearance");
    let theme = localStorage.getItem("theme");

    appearance && root.setAttribute("data-appearance", appearance);
    theme && body.setAttribute("data-theme", theme);
  })();
    </script>
    <header class="site-header">
      <nav class="cluster">
        <ul class="cluster" role="list">
          <li class="jump-to-content">
            <a href="#main" class="text-label">Jump to main content</a>
          </li>
          <li>
            <a href="/">Home</a>
          </li>
          <li>
            <a href="/blog/">Blog</a>
          </li>
          <li>
            <a href="/feed.xml">RSS</a>
          </li>
        </ul>
        <theme-machine class="theme-machine">
          <fieldset class="control-appearance">
            <legend class="visually-hidden">Select appearance</legend>
            <input id="appearance-system" type="radio" name="appearance" class="visually-hidden" value="system"></input>
            <label for="appearance-system">
              <span class="visually-hidden">System</span>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256" width="24" height="24" fill="currentcolor"><rect width="256" height="256" fill="none"/><rect x="24" y="40" width="208" height="160" rx="24"/><path d="M160,216H96a8,8,0,0,0,0,16h64a8,8,0,0,0,0-16Z"/></svg>            </label>
            <input id="appearance-light" type="radio" name="appearance" class="visually-hidden" value="light"></input>
            <label for="appearance-light">
              <span class="visually-hidden">Light</span>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256" width="24" height="24" fill="currentcolor"><rect width="256" height="256" fill="none"/><path d="M120,40V16a8,8,0,0,1,16,0V40a8,8,0,0,1-16,0Zm8,24a64,64,0,1,0,64,64A64.07,64.07,0,0,0,128,64ZM58.34,69.66A8,8,0,0,0,69.66,58.34l-16-16A8,8,0,0,0,42.34,53.66Zm0,116.68-16,16a8,8,0,0,0,11.32,11.32l16-16a8,8,0,0,0-11.32-11.32ZM192,72a8,8,0,0,0,5.66-2.34l16-16a8,8,0,0,0-11.32-11.32l-16,16A8,8,0,0,0,192,72Zm5.66,114.34a8,8,0,0,0-11.32,11.32l16,16a8,8,0,0,0,11.32-11.32ZM48,128a8,8,0,0,0-8-8H16a8,8,0,0,0,0,16H40A8,8,0,0,0,48,128Zm80,80a8,8,0,0,0-8,8v24a8,8,0,0,0,16,0V216A8,8,0,0,0,128,208Zm112-88H216a8,8,0,0,0,0,16h24a8,8,0,0,0,0-16Z"/></svg>            </label>
            <input id="appearance-dark" type="radio" name="appearance" class="visually-hidden" value="dark"></input>
            <label for="appearance-dark">
              <span class="visually-hidden">Dark</span>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256" width="24" height="24" fill="currentcolor"><rect width="256" height="256" fill="none"/><path d="M240,96a8,8,0,0,1-8,8H216v16a8,8,0,0,1-16,0V104H184a8,8,0,0,1,0-16h16V72a8,8,0,0,1,16,0V88h16A8,8,0,0,1,240,96ZM144,56h8v8a8,8,0,0,0,16,0V56h8a8,8,0,0,0,0-16h-8V32a8,8,0,0,0-16,0v8h-8a8,8,0,0,0,0,16Zm65.14,94.33A88.07,88.07,0,0,1,105.67,46.86a8,8,0,0,0-10.6-9.06A96,96,0,1,0,218.2,160.93a8,8,0,0,0-9.06-10.6Z"/></svg>            </label>
            <div class="highlighter"></div>
          </fieldset>
          <button class="theme-display-toggle" aria-expanded="false" aria-controls="theme-display">
            <span class="visually-hidden">Select theme</span>
<svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256"><rect width="256" height="256" fill="none"/>
  <path d="M49.67,186.24h0L40.48,207.3a5.74,5.74,0,0,0,1.2,6.36,8,8,0,0,0,8.86,1.67l20-8.74h0a32,32,0,0,0,32.06-8L141.25,160H52.3A32.07,32.07,0,0,0,49.67,186.24Z" fill="var(--color-theme-accent)" />
  <path d="M182.43,113.17l4.88,4.89a16,16,0,0,1,0,22.63l-9,9a8,8,0,0,1-11.31,0L106.34,89a8,8,0,0,1,0-11.31l9-9a16,16,0,0,1,22.63,0l4.89,4.88,25-25.1c10.79-10.79,28.37-11.45,39.44-1a28,28,0,0,1,.57,40.15Z" fill="none" stroke="var(--color-theme)" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/>
  <path d="M159.31,141.94l-56.68,56.69a32,32,0,0,1-32.06,8h0l-20,8.74a8,8,0,0,1-8.86-1.67h0a5.74,5.74,0,0,1-1.2-6.36l9.19-21.06h0a32,32,0,0,1,7.7-32.87l56.69-56.68" fill="none" stroke="var(--color-theme)" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/>
</svg>
          </button>
          <div id="theme-display" class="theme-display-wrapper" hidden="">
            <fieldset class="control-theme">
              <legend class="visually-hidden">Select theme</legend>
              <div class="options">
                <label for="theme-default" data-theme="default">
                  <span class="visually-hidden">default</span>
                  <input id="theme-default" type="radio" name="theme" value="default"></input>
                </label>
                <label for="theme-pink" data-theme="pink">
                  <span class="visually-hidden">pink</span>
                  <input id="theme-pink" type="radio" name="theme" value="pink"></input>
                </label>
                <label for="theme-blue" data-theme="blue">
                  <span class="visually-hidden">blue</span>
                  <input id="theme-blue" type="radio" name="theme" value="blue"></input>
                </label>
                <label for="theme-green" data-theme="green">
                  <span class="visually-hidden">green</span>
                  <input id="theme-green" type="radio" name="theme" value="green"></input>
                </label>
                <label for="theme-purple" data-theme="purple">
                  <span class="visually-hidden">purple</span>
                  <input id="theme-purple" type="radio" name="theme" value="purple"></input>
                </label>
                <label for="theme-slate" data-theme="slate">
                  <span class="visually-hidden">slate</span>
                  <input id="theme-slate" type="radio" name="theme" value="slate"></input>
                </label>
              </div>
            </fieldset>
          </div>
        </theme-machine>
        <script>
  class ThemeMachine extends HTMLElement {
    constructor() {
      super();
      this.themeToggle;
      this.themeDisplay;
    }

    connectedCallback() {
      this.setupControl("appearance", document.documentElement);
      this.setupControl("theme", document.body);

      this.themeToggle = this.querySelector(".theme-display-toggle");
      this.themeDisplay = this.querySelector(".theme-display-wrapper");

      this.handleClickOutside();
      this.themeToggle.addEventListener("click", this.handleThemeToggleClick.bind(this));
    }

    handleChange(e, prop, el) {
      const attr = `data-${prop}`;
      const value = e.target.value;

      if (!value) {
        localStorage.removeItem(prop);
        el.removeAttribute(attr);
        return;
      }

      localStorage.setItem(prop, value);
      el.setAttribute(attr, value);
    }

    handleThemeToggleClick() {
      let expanded = this.themeToggle.getAttribute("aria-expanded") === "true" || false;

      this.themeToggle.setAttribute("aria-expanded", !expanded);
      this.themeDisplay.toggleAttribute("hidden", expanded);
    }

    handleClickOutside() {
      document.addEventListener(
        "click",
        (e) => {
          if (!e.target.closest("theme-machine")) {
            this.themeToggle.setAttribute("aria-expanded", false);
            this.themeDisplay.toggleAttribute("hidden", true);
          }
        },
        false
      );
    }

    setupControl(prop, el) {
      const initialValue = localStorage.getItem(prop) || "";
      const collection = this.querySelectorAll(`[name='${prop}']`);

      for (let item of collection) {
        item.checked = item.value === initialValue;
        item.addEventListener("change", (e) => this.handleChange(e, prop, el));
      }
    }
  }

  if ("customElements" in window) {
    window.customElements.define("theme-machine", ThemeMachine);
  }
</script>
        <style>
.theme-machine {
  --_padding: 0.3em;
  --_radius: var(--radius-pill);
  --icon-size: 1.2em;
  position: relative;
  display: flex;
  isolation: isolate;
  /* Transition theme display */
}
@media (forced-colors: active) {
  .theme-machine {
    forced-color-adjust: none;
  }
}
.theme-machine .control-appearance {
  all: unset;
  position: relative;
  display: flex;
  gap: var(--_padding);
  background: var(--color-theme);
  padding: var(--_padding);
  border-radius: 360px;
  isolation: isolate;
  transform: translateZ ( 0 );
  inline-size: fit-content;
  z-index: 2;
}
.theme-machine .control-appearance label {
  display: grid;
  place-items: center;
  place-content: center;
  border-radius: 50%;
  padding: var(--_padding);
  color: var(--color-theme-offset);
  cursor: pointer;
}
.theme-machine .control-appearance input:checked + label {
  color: currentcolor;
}
.theme-machine .control-appearance input:checked:focus-visible + label {
  outline: var(--focus-outline);
  outline-offset: 2px;
}
.theme-machine .control-appearance .highlighter {
  content: "";
  position: absolute;
  top: var(--_padding);
  left: var(--_padding);
  aspect-ratio: 1;
  height: calc(100% - var(--_padding) * 2);
  background: var(--color-theme-accent);
  border-radius: 50%;
  pointer-events: none;
  z-index: -1;
  transition: translate 250ms cubic-bezier(0.65, 0, 0.35, 1);
}
.theme-machine .control-appearance input:focus-visible ~ .highlighter {
  transition: unset;
}
.theme-machine .theme-display-toggle {
  --_pull: 2rem;
  all: unset;
  position: relative;
  z-index: 1;
  display: grid;
  align-items: center;
  cursor: pointer;
  padding-block: calc(var(--_padding) * 2);
  border-radius: 0 var(--_radius) var(--_radius) 0;
  background-color: var(--color-theme-offset);
  margin-inline-start: calc(var(--_pull) * -1);
  padding-inline: calc(var(--_pull) + var(--_padding)) calc(var(--_padding) + 0.3rem);
}
.theme-machine .theme-display-toggle .icon {
  scale: 1.01;
  border-radius: var(--radius-round);
}
.theme-machine .theme-display-toggle:focus-visible .icon {
  outline: 2px solid var(--color-bg-accent);
  outline-offset: 2px;
}
.theme-machine .theme-display-wrapper {
  position: absolute;
  top: 0;
  right: 0;
  display: grid;
  align-items: start;
  inline-size: calc(100% - var(--_padding));
  block-size: 200%;
  mask-image: linear-gradient(transparent 25%, black 0);
  z-index: 0;
}
.theme-machine .control-theme {
  display: flex;
  gap: var(--space-3xs);
  padding: var(--space-xs);
  block-size: 50%;
  border-radius: var(--_radius);
  background-color: var(--color-theme-offset);
}
.theme-machine .control-theme::before {
  content: "";
  position: absolute;
  bottom: 50%;
  left: 0;
  inline-size: 100%;
  block-size: 100%;
  background-color: inherit;
  z-index: -1;
}
.theme-machine .control-theme .options {
  --_border-color: var(--color-theme-accent);
  display: flex;
  gap: var(--space-3xs);
  justify-content: space-between;
  inline-size: 100%;
}
.theme-machine .control-theme input {
  --_size: 0.95em;
  appearance: none;
  margin: 0;
  font: inherit;
  color: currentColor;
  width: var(--_size);
  height: var(--_size);
  border: 2px solid var(--color-theme);
  border-radius: var(--radius-round);
  background-color: var(--color-theme-offset);
  display: grid;
  place-content: center;
}
.theme-machine .control-theme input::before {
  --_size: 0.5em;
  content: "";
  width: var(--_size);
  height: var(--_size);
  border-radius: var(--radius-round);
  background-color: var(--color-theme);
  scale: 0;
}
.theme-machine .control-theme input:focus-visible {
  outline: 2px solid var(--color-theme-accent);
  outline-offset: 1px;
}
.theme-machine .control-theme input:checked::before {
  scale: 1;
  transition: 200ms scale cubic-bezier(0.34, 1.56, 0.64, 1);
}
.theme-machine .control-theme input:checked {
  background-color: transparent;
}
.theme-machine .theme-display-wrapper {
  --_transition: translate 300ms cubic-bezier(0.16, 1, 0.3, 1);
  translate: var(--_padding) var(--_padding);
  transition: var(--_transition);
}
.theme-machine .control-theme {
  translate: 0 calc(100% - var(--_padding));
  transition: var(--_transition);
}
.theme-machine .theme-display-wrapper[hidden] {
  translate: 0 0;
}
.theme-machine .theme-display-wrapper[hidden] .control-theme {
  translate: 0 0;
}
.theme-machine .theme-display-wrapper[hidden] input {
  display: none;
}
</style>
      </nav>
    </header>
    <style>
.site-header {
  position: relative;
  display: flex;
  justify-content: flex-end;
  padding-inline: var(--page-gutters);
  margin-block: var(--page-gutters) var(--space-xl);
  z-index: 1;
}
@media (max-width: 40rem) {
  .site-header {
    .site-header nav {
      --column-gap: clamp(var(--space-s), 5vw, var(--space-m));
      --row-gap: var(--space-s);
      --justify: space-between;
      inline-size: 100%;
    }
  }
}
.site-header nav {
  position: relative;
}
.site-header a {
  display: grid;
  place-items: center;
  place-content: center;
  color: currentcolor;
  text-decoration: none;
}
.site-header a:hover {
  color: var(--color-theme-offset);
}
.site-header .jump-to-content {
  position: absolute;
  top: -9999px;
  left: 0;
}
.site-header .jump-to-content:focus-within {
  top: 50%;
  translate: 0 -50%;
  z-index: 1;
}
.site-header .jump-to-content a {
  padding: var(--space-2xs) var(--space-s);
  background-color: var(--color-bg);
}
</style>
    <main id="main" class="breakout flow prose"><figure class="page-timer" aria-hidden="true">
  <svg class="timer" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentcolor" viewBox="0 0 256 256">
    <rect width="256" height="256" fill="none"></rect>
    <circle cx="128" cy="128" r="88" fill="var(--color-theme)"></circle>
    <circle cx="128" cy="128" r="88" fill="none" stroke="currentcolor" stroke-miterlimit="10" stroke-width="16"></circle>
    <line class="timer-hand" x1="128" y1="128" x2="167.6" y2="88.4" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></line>
    <line class="timer-switch" x1="104" y1="8" x2="152" y2="8" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></line>
  </svg>
</figure>
<style>
.page-timer {
  display: none;
}
</style>
<h1 class="title | skewer">
  Some Things About Keyframes
</h1>
<section class="info | cluster skewer">
  <div class="cluster pseudo-gradient">
<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentcolor" viewBox="0 0 256 256">
  <rect width="256" height="256" fill="none"></rect>
  <path d="M40,88H216V48a8,8,0,0,0-8-8H48a8,8,0,0,0-8,8Z" fill="var(--color-theme-accent)"></path>
  <rect x="40" y="40" width="176" height="176" rx="8" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></rect>
  <line x1="176" y1="24" x2="176" y2="56" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></line>
  <line x1="80" y1="24" x2="80" y2="56" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></line>
  <line x1="40" y1="88" x2="216" y2="88" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></line>
</svg>    <span>
      Posted on       <strong>2024-12-30 00:00:00 +0000 UTC</strong>
    </span>
  </div>
  <div class="cluster pseudo-gradient">
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="var(--color-text-accent)" viewBox="0 0 256 256">
  <rect width="256" height="256" fill="none"></rect>
  <circle cx="128" cy="128" r="88" fill="var(--color-theme)"></circle>
  <circle cx="128" cy="128" r="88" fill="none" stroke="var(--color-text-accent)" stroke-miterlimit="10" stroke-width="16"></circle>
  <line x1="128" y1="128" x2="167.6" y2="88.4" fill="none" stroke="var(--color-text-accent)" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></line>
  <line x1="104" y1="8" x2="152" y2="8" fill="none" stroke="var(--color-text-accent)" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></line>
</svg>    <span>
       Takes about       <strong>4 minutes</strong>
       to read     </span>
  </div>
</section>
<p>Whether you&rsquo;ve barely scratched the surface of keyframe animations in CSS or fancy yourself a seasoned pro, I suggest reading <a href="https://www.joshwcomeau.com/animation/keyframe-animations/">An Interactive Guide to Keyframe Animations</a>. Josh (as always) does an impeccable deep dive that includes interactive demos for multi-step animations, loops, setting dynamic values, and more.</p>

<p>This is a quick post pointing out some other minor particulars:</p>

<ol>
<li>Duplicate keyframe properties</li>
<li>The order of keyframe rules</li>
<li>Custom timing function (easing) values at specific keyframes</li>
</ol>

<h2>Duplicate keyframe properties</h2>

<p>Imagine an &ldquo;appearance&rdquo; animation where an element slides down, scales up, and changes color. The starting <code>0%</code> keyframe sets the element&rsquo;s y-axis offset position and scales down the size. When the animation is triggered, the element glides up from the offset to its central position for the full duration of the animation. About halfway through, the element&rsquo;s size begins scaling back up and the background color changes. At first, we might be tempted to duplicate the <code>background-color</code> and <code>scale</code> properties in both <code>0%</code> and <code>50%</code> keyframe blocks.</p>

<pre class="chroma language-css"><code>@<span style="color:#66d9ef">keyframes</span> <span style="color:#f92672">animate</span> {
  <span style="color:#f92672">0</span><span style="color:#f92672">%</span> {
    <span style="color:#66d9ef">background-color</span>: <span style="color:#66d9ef">red</span>;
    scale: <span style="color:#ae81ff">0.5</span>;
    translate: <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">100</span><span style="color:#66d9ef">%</span>;
  }
  <span style="color:#f92672">50</span><span style="color:#f92672">%</span> {
    <span style="color:#66d9ef">background-color</span>: <span style="color:#66d9ef">red</span>;
    scale: <span style="color:#ae81ff">0.5</span>;
  }
  <span style="color:#f92672">100</span><span style="color:#f92672">%</span> {
    <span style="color:#66d9ef">background-color</span>: <span style="color:#66d9ef">green</span>;
    scale: <span style="color:#ae81ff">1</span>;
    translate: <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">0</span>;
  }
}
</code></pre>

<p>Although this functions correctly, it requires us to manage the same property declarations in two locations. Instead of repeating, we can share them in a comma-separated ruleset.</p>

<pre class="chroma language-css"><code>@<span style="color:#66d9ef">keyframes</span> <span style="color:#f92672">animate</span> {
  <span style="color:#f92672">0</span><span style="color:#f92672">%</span> {
    translate: <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">100</span><span style="color:#66d9ef">%</span>;
  }
  <span style="color:#f92672">0</span><span style="color:#f92672">%</span><span style="color:#f92672">,</span> <span style="color:#f92672">50</span><span style="color:#f92672">%</span> {
    <span style="color:#66d9ef">background-color</span>: <span style="color:#66d9ef">red</span>;
    scale: <span style="color:#ae81ff">0.5</span>;
  }
  <span style="color:#f92672">100</span><span style="color:#f92672">%</span> {
    <span style="color:#66d9ef">background-color</span>: <span style="color:#66d9ef">green</span>;
    scale: <span style="color:#ae81ff">1</span>;
    translate: <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">0</span>;
  }
}
</code></pre>

<h2>Keyframe rules order</h2>

<p>Another semi-interesting quirk is that we can rearrange the keyframe order.</p>

<pre class="chroma language-css"><code>@<span style="color:#66d9ef">keyframes</span> <span style="color:#f92672">animate</span> {
  <span style="color:#f92672">0</span><span style="color:#f92672">%</span> {
    translate: <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">100</span><span style="color:#66d9ef">%</span>;
  }
  <span style="color:#f92672">100</span><span style="color:#f92672">%</span> {
    <span style="color:#66d9ef">background-color</span>: <span style="color:#66d9ef">green</span>;
    scale: <span style="color:#ae81ff">1</span>;
    translate: <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">0</span>;
  }
  <span style="color:#75715e">/* Set and hold values until halfway through animation */</span>
  <span style="color:#f92672">0</span><span style="color:#f92672">%</span><span style="color:#f92672">,</span> <span style="color:#f92672">50</span><span style="color:#f92672">%</span> {
    <span style="color:#66d9ef">background-color</span>: <span style="color:#66d9ef">red</span>;
    scale: <span style="color:#ae81ff">0.5</span>;
  }
}
</code></pre>

<p>Just for kicks, here is a version that swaps <code>0%</code> and <code>100%</code> for their corresponding <code>from</code> and <code>to</code> keyword values.</p>

<pre class="chroma language-css"><code>@<span style="color:#66d9ef">keyframes</span> <span style="color:#f92672">animate</span> {
  <span style="color:#f92672">from</span> {
    translate: <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">100</span><span style="color:#66d9ef">%</span>;
  }
  <span style="color:#f92672">to</span> {
    <span style="color:#66d9ef">background-color</span>: <span style="color:#66d9ef">green</span>;
    scale: <span style="color:#ae81ff">1</span>;
    translate: <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">0</span>;
  }
  <span style="color:#75715e">/* Set and hold values until halfway through animation */</span>
  <span style="color:#f92672">from</span><span style="color:#f92672">,</span> <span style="color:#f92672">50</span><span style="color:#f92672">%</span> {
    <span style="color:#66d9ef">background-color</span>: <span style="color:#66d9ef">red</span>;
    scale: <span style="color:#ae81ff">0.5</span>;
  }
}
</code></pre>

<p>The <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/@keyframes#resolving_duplicates">&ldquo;Resolving Duplicates&rdquo;</a> section from the MDN docs mentions that <code>@keyframes</code> rules do not cascade, which explains why this order still returns the expected animation. Customizing the order could be useful for grouping property changes within a <code>@keyframes</code> block as an animation becomes more complex.</p>

<p>That same section of the MDN docs also points out that cascading <em>does</em> occur when multiple keyframes define the same percentage values. So, in the following <code>@keyframes</code> block, the second <code>translate</code> declaration overrides the first.</p>

<pre class="chroma language-css"><code>@<span style="color:#66d9ef">keyframes</span> <span style="color:#f92672">animate</span> {
  <span style="color:#f92672">to</span> {
    translate: <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">100</span><span style="color:#66d9ef">%</span>;
    rotate: <span style="color:#ae81ff">1</span><span style="color:#66d9ef">turn</span>;
  }
  <span style="color:#f92672">to</span> {
    translate: <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">-100</span><span style="color:#66d9ef">%</span>;
  }
}
</code></pre>

<h2>Keyframe-specific easing</h2>

<p>Under <a href="https://www.w3.org/TR/css-animations-1/#timing-functions">&ldquo;Timing functions for keyframes&rdquo;</a> from the CSS Animations Level 1 spec, we discover that easing can be adjusted within a keyframe ruleset.</p>

<blockquote>
<p>A keyframe style rule may also declare the timing function that is to be used as the animation moves to the next keyframe.</p>
</blockquote>

<p>Toggle open the CSS panel in the ensuing CodePen demo and look for the <code>@keyframes</code> block. Inside one of the percentages, a custom easing is applied using the <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/easing-function/linear"><code>linear()</code> CSS function</a> to give each element some wobble as it lands.</p>

<p>{% codepen &ldquo;<a href="https://codepen.io/hexagoncircle/pen/yyBozpm&quot;">https://codepen.io/hexagoncircle/pen/yyBozpm&rdquo;</a>, &ldquo;500&rdquo; %}</p>

<p>I think that looks quite nice! Adding keyframe-specific easing brings an extra layer of polish and vitality to our animations. One minor snag, though: We can&rsquo;t set a CSS variable as an <code>animation-timing-function</code> value. This unfortunately means we&rsquo;re unable to access shared custom easing values, say from a library or design system.</p>

<pre class="chroma language-css"><code>:<span style="color:#a6e22e">root</span> {
  --easeOutCubic: cubic-bezier(<span style="color:#ae81ff">0.33</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">0.68</span>, <span style="color:#ae81ff">1</span>);
}

@<span style="color:#66d9ef">keyframes</span> {
  <span style="color:#f92672">50</span><span style="color:#f92672">%</span> {
    <span style="color:#66d9ef">animation-timing-function</span>: <span style="color:#a6e22e">var</span>(<span style="color:#f92672">-</span><span style="color:#f92672">-</span>easeOutCubic);
  }
}
</code></pre>

<h2>Helpful resources</h2>

<ul>
<li><a href="https://www.joshwcomeau.com/animation/keyframe-animations/">An Interactive Guide to Keyframe Animations</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/@keyframes">@keyframes on MDN</a></li>
<li><a href="https://easings.net/">Easing Functions Cheat Sheet</a></li>
<li><a href="https://linear-easing-generator.netlify.app/">Linear easing generator</a></li>
<li><a href="https://www.smashingmagazine.com/2023/09/path-css-easing-linear-function/">The Path To Awesome CSS Easing With The <code>linear()</code> Function</a></li>
</ul>
<p class="cta arrow-start" style="--flow-space: var(--space-l)">
  <a href="/blog/">Back to all blog posts</a>
</p>
<style>
  :is(.post-timer, .title) {
    --flow-space: 0;
    grid-row: 2;
  }

  .title {
    margin-block-end: 8vh;
  }

  .info {
    order: -1;
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem 1.5rem;
    margin-inline-start: 0.5rem;
    margin-block: 0 1em;
  }

  .info > * {
    align-items: center;
    display: flex;
    gap: 0.2rem;
    line-height: 1.2;
    font-size: 0.8em;
    padding: 0.1rem var(--space-2xs) 0.1rem 0;
  }

  .info svg {
    --_size: 1.75em;
    flex-shrink: 0;
    margin-inline-start: calc(var(--_size) / -2);
    width: var(--_size);
    height: var(--_size);
  }
</style></main>
    <footer class="breakout site-footer">
      <p class="copyright">
        
    Â©         <strong>Ryan Mulligan</strong>
         from day one to this magic moment in
            <span></span>
      </p>
      <p>
        
    Assembled with a boundless affinity for the web
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentcolor" viewBox="0 0 256 256">
  <path d="M240,94c0,70-103.79,126.66-108.21,129a8,8,0,0,1-7.58,0C119.79,220.66,16,164,16,94A62.07,62.07,0,0,1,78,32c20.65,0,38.73,8.88,50,23.89C139.27,40.88,157.35,32,178,32A62.07,62.07,0,0,1,240,94Z"></path>
</svg>      </p>
      <ul class="cluster" style="--gap: var(--space-2xs)" role="list">
        <li>
          <a href="/">Home</a>
        </li>
        <li>
          <a href="/blog/">Blog</a>
        </li>
        <li>
          <a href="/feed.xml">RSS</a>
        </li>
        <li>
          <a href="/blogroll/">Blogroll</a>
        </li>
        <li>
          <a target="_blank" href="https://github.com/hexagoncircle/ryan-mulligan-dev/issues/new">Report an issue</a>
        </li>
      </ul>
    </footer>
    <style>
.site-footer {
  position: sticky;
  top: 100vh;
  padding-block: var(--space-2xl);
  font-size: 0.75em;
}
.site-footer p {
  text-wrap: balance;
}
.site-footer .copyright {
  margin-inline-start: -0.1em;
}
.site-footer .icon {
  --_size: 1.2em;
  position: relative;
  top: 0.2em;
  margin-inline: 0.1em;
  width: var(--_size);
  height: var(--_size);
  color: red;
}
.site-footer li {
  display: flex;
  align-items: center;
  gap: 0.2em;
}
</style>
    <script></script>
    <script async="" defer="" src="https://scripts.withcabin.com/hello.js"></script>
  </body>
</html>
