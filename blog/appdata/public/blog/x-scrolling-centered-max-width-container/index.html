<html lang="en">
  <head>
    <meta charset="utf-8"></meta>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>
    <meta name="generator" content="VueGo"></meta>
    <title>Horizontal Scrolling in a Centered Max-Width Container</title>
    <meta name="description"></meta>
    <link rel="canonical"></link>
    <meta name="author" content="Tit Petric"></meta>
    <link rel="icon" href="/assets/favicon/favicon.ico" sizes="32x32"></link>
    <link rel="icon" href="/assets/favicon/favicon.svg" type="image/svg+xml"></link>
    <link rel="apple-touch-icon" href="/assets/favicon/apple-touch-icon.png"></link>
    <link rel="manifest" href="/assets/site.webmanifest"></link>
    <meta name="twitter:card" content="summary_large_image"></meta>
    <meta name="twitter:title"></meta>
    <meta name="twitter:description"></meta>
    <meta name="twitter:image"></meta>
    <meta name="og:title"></meta>
    <meta name="og:description"></meta>
    <meta property="og:image"></meta>
    <meta name="fediverse:creator" content="@hexagoncircle@fosstodon.org"></meta>
    <link href="https://github.com/hexagoncircle" rel="me"></link>
    <link href="https://twitter.com/hexagoncircle" rel="me"></link>
    <link href="https://fosstodon.org/@hexagoncircle" rel="me"></link>
    <link href="https://codepen.io/hexagoncircle" rel="me"></link>
    <link rel="webmention" href="https://webmention.io/ryanmulligan.dev/webmention"></link>
    <link rel="pingback" href="https://webmention.io/ryanmulligan.dev/xmlrpc"></link>
    <link rel="alternate" type="application/atom+xml" title="Ryan Mulligan"></link>
    <link rel="stylesheet" href="/assets/css/themes.css"></link>
    <link rel="stylesheet" href="/assets/css/styles.css"></link>
    <style></style>
  </head>
  <body>
    <script>
  (function () {
    let root = document.documentElement;
    let body = document.body;

    let appearance = localStorage.getItem("appearance");
    let theme = localStorage.getItem("theme");

    appearance && root.setAttribute("data-appearance", appearance);
    theme && body.setAttribute("data-theme", theme);
  })();
    </script>
    <header class="site-header">
      <nav class="cluster">
        <ul class="cluster" role="list">
          <li class="jump-to-content">
            <a href="#main" class="text-label">Jump to main content</a>
          </li>
          <li>
            <a href="/">Home</a>
          </li>
          <li>
            <a href="/blog/">Blog</a>
          </li>
          <li>
            <a href="/feed.xml">RSS</a>
          </li>
        </ul>
        <theme-machine class="theme-machine">
          <fieldset class="control-appearance">
            <legend class="visually-hidden">Select appearance</legend>
            <input id="appearance-system" type="radio" name="appearance" class="visually-hidden" value="system"></input>
            <label for="appearance-system">
              <span class="visually-hidden">System</span>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256" width="24" height="24" fill="currentcolor"><rect width="256" height="256" fill="none"/><rect x="24" y="40" width="208" height="160" rx="24"/><path d="M160,216H96a8,8,0,0,0,0,16h64a8,8,0,0,0,0-16Z"/></svg>            </label>
            <input id="appearance-light" type="radio" name="appearance" class="visually-hidden" value="light"></input>
            <label for="appearance-light">
              <span class="visually-hidden">Light</span>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256" width="24" height="24" fill="currentcolor"><rect width="256" height="256" fill="none"/><path d="M120,40V16a8,8,0,0,1,16,0V40a8,8,0,0,1-16,0Zm8,24a64,64,0,1,0,64,64A64.07,64.07,0,0,0,128,64ZM58.34,69.66A8,8,0,0,0,69.66,58.34l-16-16A8,8,0,0,0,42.34,53.66Zm0,116.68-16,16a8,8,0,0,0,11.32,11.32l16-16a8,8,0,0,0-11.32-11.32ZM192,72a8,8,0,0,0,5.66-2.34l16-16a8,8,0,0,0-11.32-11.32l-16,16A8,8,0,0,0,192,72Zm5.66,114.34a8,8,0,0,0-11.32,11.32l16,16a8,8,0,0,0,11.32-11.32ZM48,128a8,8,0,0,0-8-8H16a8,8,0,0,0,0,16H40A8,8,0,0,0,48,128Zm80,80a8,8,0,0,0-8,8v24a8,8,0,0,0,16,0V216A8,8,0,0,0,128,208Zm112-88H216a8,8,0,0,0,0,16h24a8,8,0,0,0,0-16Z"/></svg>            </label>
            <input id="appearance-dark" type="radio" name="appearance" class="visually-hidden" value="dark"></input>
            <label for="appearance-dark">
              <span class="visually-hidden">Dark</span>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256" width="24" height="24" fill="currentcolor"><rect width="256" height="256" fill="none"/><path d="M240,96a8,8,0,0,1-8,8H216v16a8,8,0,0,1-16,0V104H184a8,8,0,0,1,0-16h16V72a8,8,0,0,1,16,0V88h16A8,8,0,0,1,240,96ZM144,56h8v8a8,8,0,0,0,16,0V56h8a8,8,0,0,0,0-16h-8V32a8,8,0,0,0-16,0v8h-8a8,8,0,0,0,0,16Zm65.14,94.33A88.07,88.07,0,0,1,105.67,46.86a8,8,0,0,0-10.6-9.06A96,96,0,1,0,218.2,160.93a8,8,0,0,0-9.06-10.6Z"/></svg>            </label>
            <div class="highlighter"></div>
          </fieldset>
          <button class="theme-display-toggle" aria-expanded="false" aria-controls="theme-display">
            <span class="visually-hidden">Select theme</span>
<svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256"><rect width="256" height="256" fill="none"/>
  <path d="M49.67,186.24h0L40.48,207.3a5.74,5.74,0,0,0,1.2,6.36,8,8,0,0,0,8.86,1.67l20-8.74h0a32,32,0,0,0,32.06-8L141.25,160H52.3A32.07,32.07,0,0,0,49.67,186.24Z" fill="var(--color-theme-accent)" />
  <path d="M182.43,113.17l4.88,4.89a16,16,0,0,1,0,22.63l-9,9a8,8,0,0,1-11.31,0L106.34,89a8,8,0,0,1,0-11.31l9-9a16,16,0,0,1,22.63,0l4.89,4.88,25-25.1c10.79-10.79,28.37-11.45,39.44-1a28,28,0,0,1,.57,40.15Z" fill="none" stroke="var(--color-theme)" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/>
  <path d="M159.31,141.94l-56.68,56.69a32,32,0,0,1-32.06,8h0l-20,8.74a8,8,0,0,1-8.86-1.67h0a5.74,5.74,0,0,1-1.2-6.36l9.19-21.06h0a32,32,0,0,1,7.7-32.87l56.69-56.68" fill="none" stroke="var(--color-theme)" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/>
</svg>
          </button>
          <div id="theme-display" class="theme-display-wrapper" hidden="">
            <fieldset class="control-theme">
              <legend class="visually-hidden">Select theme</legend>
              <div class="options">
                <label for="theme-default" data-theme="default">
                  <span class="visually-hidden">default</span>
                  <input id="theme-default" type="radio" name="theme" value="default"></input>
                </label>
                <label for="theme-pink" data-theme="pink">
                  <span class="visually-hidden">pink</span>
                  <input id="theme-pink" type="radio" name="theme" value="pink"></input>
                </label>
                <label for="theme-blue" data-theme="blue">
                  <span class="visually-hidden">blue</span>
                  <input id="theme-blue" type="radio" name="theme" value="blue"></input>
                </label>
                <label for="theme-green" data-theme="green">
                  <span class="visually-hidden">green</span>
                  <input id="theme-green" type="radio" name="theme" value="green"></input>
                </label>
                <label for="theme-purple" data-theme="purple">
                  <span class="visually-hidden">purple</span>
                  <input id="theme-purple" type="radio" name="theme" value="purple"></input>
                </label>
                <label for="theme-slate" data-theme="slate">
                  <span class="visually-hidden">slate</span>
                  <input id="theme-slate" type="radio" name="theme" value="slate"></input>
                </label>
              </div>
            </fieldset>
          </div>
        </theme-machine>
        <script>
  class ThemeMachine extends HTMLElement {
    constructor() {
      super();
      this.themeToggle;
      this.themeDisplay;
    }

    connectedCallback() {
      this.setupControl("appearance", document.documentElement);
      this.setupControl("theme", document.body);

      this.themeToggle = this.querySelector(".theme-display-toggle");
      this.themeDisplay = this.querySelector(".theme-display-wrapper");

      this.handleClickOutside();
      this.themeToggle.addEventListener("click", this.handleThemeToggleClick.bind(this));
    }

    handleChange(e, prop, el) {
      const attr = `data-${prop}`;
      const value = e.target.value;

      if (!value) {
        localStorage.removeItem(prop);
        el.removeAttribute(attr);
        return;
      }

      localStorage.setItem(prop, value);
      el.setAttribute(attr, value);
    }

    handleThemeToggleClick() {
      let expanded = this.themeToggle.getAttribute("aria-expanded") === "true" || false;

      this.themeToggle.setAttribute("aria-expanded", !expanded);
      this.themeDisplay.toggleAttribute("hidden", expanded);
    }

    handleClickOutside() {
      document.addEventListener(
        "click",
        (e) => {
          if (!e.target.closest("theme-machine")) {
            this.themeToggle.setAttribute("aria-expanded", false);
            this.themeDisplay.toggleAttribute("hidden", true);
          }
        },
        false
      );
    }

    setupControl(prop, el) {
      const initialValue = localStorage.getItem(prop) || "";
      const collection = this.querySelectorAll(`[name='${prop}']`);

      for (let item of collection) {
        item.checked = item.value === initialValue;
        item.addEventListener("change", (e) => this.handleChange(e, prop, el));
      }
    }
  }

  if ("customElements" in window) {
    window.customElements.define("theme-machine", ThemeMachine);
  }
</script>
        <style>
.theme-machine {
  --_padding: 0.3em;
  --_radius: var(--radius-pill);
  --icon-size: 1.2em;
  position: relative;
  display: flex;
  isolation: isolate;
  /* Transition theme display */
}
@media (forced-colors: active) {
  .theme-machine {
    forced-color-adjust: none;
  }
}
.theme-machine .control-appearance {
  all: unset;
  position: relative;
  display: flex;
  gap: var(--_padding);
  background: var(--color-theme);
  padding: var(--_padding);
  border-radius: 360px;
  isolation: isolate;
  transform: translateZ ( 0 );
  inline-size: fit-content;
  z-index: 2;
}
.theme-machine .control-appearance label {
  display: grid;
  place-items: center;
  place-content: center;
  border-radius: 50%;
  padding: var(--_padding);
  color: var(--color-theme-offset);
  cursor: pointer;
}
.theme-machine .control-appearance input:checked + label {
  color: currentcolor;
}
.theme-machine .control-appearance input:checked:focus-visible + label {
  outline: var(--focus-outline);
  outline-offset: 2px;
}
.theme-machine .control-appearance .highlighter {
  content: "";
  position: absolute;
  top: var(--_padding);
  left: var(--_padding);
  aspect-ratio: 1;
  height: calc(100% - var(--_padding) * 2);
  background: var(--color-theme-accent);
  border-radius: 50%;
  pointer-events: none;
  z-index: -1;
  transition: translate 250ms cubic-bezier(0.65, 0, 0.35, 1);
}
.theme-machine .control-appearance input:focus-visible ~ .highlighter {
  transition: unset;
}
.theme-machine .theme-display-toggle {
  --_pull: 2rem;
  all: unset;
  position: relative;
  z-index: 1;
  display: grid;
  align-items: center;
  cursor: pointer;
  padding-block: calc(var(--_padding) * 2);
  border-radius: 0 var(--_radius) var(--_radius) 0;
  background-color: var(--color-theme-offset);
  margin-inline-start: calc(var(--_pull) * -1);
  padding-inline: calc(var(--_pull) + var(--_padding)) calc(var(--_padding) + 0.3rem);
}
.theme-machine .theme-display-toggle .icon {
  scale: 1.01;
  border-radius: var(--radius-round);
}
.theme-machine .theme-display-toggle:focus-visible .icon {
  outline: 2px solid var(--color-bg-accent);
  outline-offset: 2px;
}
.theme-machine .theme-display-wrapper {
  position: absolute;
  top: 0;
  right: 0;
  display: grid;
  align-items: start;
  inline-size: calc(100% - var(--_padding));
  block-size: 200%;
  mask-image: linear-gradient(transparent 25%, black 0);
  z-index: 0;
}
.theme-machine .control-theme {
  display: flex;
  gap: var(--space-3xs);
  padding: var(--space-xs);
  block-size: 50%;
  border-radius: var(--_radius);
  background-color: var(--color-theme-offset);
}
.theme-machine .control-theme::before {
  content: "";
  position: absolute;
  bottom: 50%;
  left: 0;
  inline-size: 100%;
  block-size: 100%;
  background-color: inherit;
  z-index: -1;
}
.theme-machine .control-theme .options {
  --_border-color: var(--color-theme-accent);
  display: flex;
  gap: var(--space-3xs);
  justify-content: space-between;
  inline-size: 100%;
}
.theme-machine .control-theme input {
  --_size: 0.95em;
  appearance: none;
  margin: 0;
  font: inherit;
  color: currentColor;
  width: var(--_size);
  height: var(--_size);
  border: 2px solid var(--color-theme);
  border-radius: var(--radius-round);
  background-color: var(--color-theme-offset);
  display: grid;
  place-content: center;
}
.theme-machine .control-theme input::before {
  --_size: 0.5em;
  content: "";
  width: var(--_size);
  height: var(--_size);
  border-radius: var(--radius-round);
  background-color: var(--color-theme);
  scale: 0;
}
.theme-machine .control-theme input:focus-visible {
  outline: 2px solid var(--color-theme-accent);
  outline-offset: 1px;
}
.theme-machine .control-theme input:checked::before {
  scale: 1;
  transition: 200ms scale cubic-bezier(0.34, 1.56, 0.64, 1);
}
.theme-machine .control-theme input:checked {
  background-color: transparent;
}
.theme-machine .theme-display-wrapper {
  --_transition: translate 300ms cubic-bezier(0.16, 1, 0.3, 1);
  translate: var(--_padding) var(--_padding);
  transition: var(--_transition);
}
.theme-machine .control-theme {
  translate: 0 calc(100% - var(--_padding));
  transition: var(--_transition);
}
.theme-machine .theme-display-wrapper[hidden] {
  translate: 0 0;
}
.theme-machine .theme-display-wrapper[hidden] .control-theme {
  translate: 0 0;
}
.theme-machine .theme-display-wrapper[hidden] input {
  display: none;
}
</style>
      </nav>
    </header>
    <style>
.site-header {
  position: relative;
  display: flex;
  justify-content: flex-end;
  padding-inline: var(--page-gutters);
  margin-block: var(--page-gutters) var(--space-xl);
  z-index: 1;
}
@media (max-width: 40rem) {
  .site-header {
    .site-header nav {
      --column-gap: clamp(var(--space-s), 5vw, var(--space-m));
      --row-gap: var(--space-s);
      --justify: space-between;
      inline-size: 100%;
    }
  }
}
.site-header nav {
  position: relative;
}
.site-header a {
  display: grid;
  place-items: center;
  place-content: center;
  color: currentcolor;
  text-decoration: none;
}
.site-header a:hover {
  color: var(--color-theme-offset);
}
.site-header .jump-to-content {
  position: absolute;
  top: -9999px;
  left: 0;
}
.site-header .jump-to-content:focus-within {
  top: 50%;
  translate: 0 -50%;
  z-index: 1;
}
.site-header .jump-to-content a {
  padding: var(--space-2xs) var(--space-s);
  background-color: var(--color-bg);
}
</style>
    <main id="main" class="breakout flow prose"><figure class="page-timer" aria-hidden="true">
  <svg class="timer" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentcolor" viewBox="0 0 256 256">
    <rect width="256" height="256" fill="none"></rect>
    <circle cx="128" cy="128" r="88" fill="var(--color-theme)"></circle>
    <circle cx="128" cy="128" r="88" fill="none" stroke="currentcolor" stroke-miterlimit="10" stroke-width="16"></circle>
    <line class="timer-hand" x1="128" y1="128" x2="167.6" y2="88.4" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></line>
    <line class="timer-switch" x1="104" y1="8" x2="152" y2="8" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></line>
  </svg>
</figure>
<style>
.page-timer {
  display: none;
}
</style>
<h1 class="title | skewer">
  Horizontal Scrolling in a Centered Max-Width Container
</h1>
<section class="info | cluster skewer">
  <div class="cluster pseudo-gradient">
<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentcolor" viewBox="0 0 256 256">
  <rect width="256" height="256" fill="none"></rect>
  <path d="M40,88H216V48a8,8,0,0,0-8-8H48a8,8,0,0,0-8,8Z" fill="var(--color-theme-accent)"></path>
  <rect x="40" y="40" width="176" height="176" rx="8" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></rect>
  <line x1="176" y1="24" x2="176" y2="56" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></line>
  <line x1="80" y1="24" x2="80" y2="56" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></line>
  <line x1="40" y1="88" x2="216" y2="88" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></line>
</svg>    <span>
      Posted on       <strong>2022-03-11 00:00:00 +0000 UTC</strong>
    </span>
  </div>
  <div class="cluster pseudo-gradient">
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="var(--color-text-accent)" viewBox="0 0 256 256">
  <rect width="256" height="256" fill="none"></rect>
  <circle cx="128" cy="128" r="88" fill="var(--color-theme)"></circle>
  <circle cx="128" cy="128" r="88" fill="none" stroke="var(--color-text-accent)" stroke-miterlimit="10" stroke-width="16"></circle>
  <line x1="128" y1="128" x2="167.6" y2="88.4" fill="none" stroke="var(--color-text-accent)" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></line>
  <line x1="104" y1="8" x2="152" y2="8" fill="none" stroke="var(--color-text-accent)" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></line>
</svg>    <span>
       Takes about       <strong>8 minutes</strong>
       to read     </span>
  </div>
</section>
<h2>The layout challenge</h2>

<p>When I had first assembled a gallery of <a href="https://codepen.io/hexagoncircle">CodePen projects</a> to include on my personal site redesign in the summer of 2021, I imagined the following layout and interaction:</p>

<ul>
<li>The page&rsquo;s main content container is centered on the page with a max-width set.</li>
<li>The first gallery item aligns with the left side of the content container.</li>
<li>Items overflow to the right and beyond the viewport, indicating that it can be scrolled horizontally.</li>
<li>Once scrolling is initiated, the left side of the gallery would break out of the content container, eventually sliding past the left edge of the viewport.</li>
</ul>

<dl>
<dt>This was a tough layout to get right! Ultimately, I decided to go with a slightly different <a href="/">homepage</a> design that didn&rsquo;t rely on aligning the start position inside the page content area.</dt>
<dt>::: callout
In case my site design has been updated, this is for my future friends reading: You can see the aforementioned version of my site in <a href="https://twitter.com/hexagoncircle/status/1338885523658555394?s=20&amp;t=u2zpk5LgvhQeV5_YwYB5rg">this tweet</a> from August 2021.
:::</dt>
</dl>

<h2>Revisiting the desired result</h2>

<p>The altered design worked well. But I still couldn&rsquo;t shake it. There had to be a way to build that original layout. Turns out nearly anything is possible with CSS these days. Here&rsquo;s a CodePen containing some gallery examples:</p>

<p>{% codepen &ldquo;<a href="https://codepen.io/hexagoncircle/pen/gOWjwme&quot;">https://codepen.io/hexagoncircle/pen/gOWjwme&rdquo;</a>, 650 %}</p>

<p>I shared <a href="https://twitter.com/hexagoncircle/status/1422559196088737797">this solution</a> on Twitter back before I had a blog space. Now that I do have one, I thought I&rsquo;d take a deeper dive into how I achieved the final result.</p>

<h2>Using a full-bleed layout</h2>

<p>Josh Comeau&rsquo;s <a href="https://www.joshwcomeau.com/css/full-bleed/">Full-Bleed Layout Using CSS Grid</a> is an article I reference often. It&rsquo;s a solid, modern approach to limit the maximum width of page content while allowing &ldquo;full-bleed&rdquo; elements such as images to stretch across the viewport width. This style of layout has been achieveable by other means as discussed at length in <a href="https://css-tricks.com/full-width-containers-limited-width-parents/">Full Width Containers in Limited Width Parents</a> on CSS-Tricks but I agree with Josh&rsquo;s sentiment about negative margin approaches being a bit hacky in comparison.</p>

<p>The CodePen above follows Josh&rsquo;s <a href="https://www.joshwcomeau.com/css/full-bleed/#padding">padding example</a> but adds some named template areas which I&rsquo;ll explain:</p>

<pre class="chroma language-css"><code>.<span style="color:#a6e22e">content</span> {
  <span style="color:#66d9ef">display</span>: <span style="color:#66d9ef">grid</span>;
  <span style="color:#66d9ef">grid-template-columns</span>:
    [full-start] <span style="color:#ae81ff">1</span>fr
    [<span style="color:#66d9ef">content</span><span style="color:#f92672">-</span><span style="color:#66d9ef">start</span>]
    <span style="color:#a6e22e">min</span>(<span style="color:#a6e22e">var</span>(<span style="color:#f92672">-</span><span style="color:#f92672">-</span>content<span style="color:#f92672">-</span>max<span style="color:#f92672">-</span>width), <span style="color:#ae81ff">100</span><span style="color:#66d9ef">%</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">var</span>(<span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#66d9ef">space</span><span style="color:#f92672">-</span>md) <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>)
    [<span style="color:#66d9ef">content</span><span style="color:#f92672">-</span><span style="color:#66d9ef">end</span>]
    <span style="color:#ae81ff">1</span>fr [full-end];
}

.<span style="color:#a6e22e">content</span> <span style="color:#f92672">&gt;</span> <span style="color:#f92672">*</span> {
  <span style="color:#66d9ef">grid-column</span>: <span style="color:#66d9ef">content</span>;
}

.<span style="color:#a6e22e">gallery</span> {
  <span style="color:#66d9ef">grid-column</span>: full;
  <span style="color:#75715e">/* other gallery code */</span>
}
</code></pre>

<dl>
<dt>The first and third columns are set to <code>1fr</code>, causing them to fill the space surrounding either side of the second. The value of the second column is calculated by a CSS <code>min()</code> function, which selects the smaller of its two values depending on the window size. On screensizes smaller than <code>--content-max-width</code>, padding is created on either side by doubling a space value and subtracting it from 100% to suppress any unwanted page overflow.</dt>
<dt>::: callout
Something to note is that <code>calc()</code> can be used but is not necessary for calculations written inside <code>min()</code>, <code>max()</code>, and <code>clamp()</code> functions.
:::</dt>
</dl>

<p>A noticeable difference in this code are the <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Grid_Layout/Layout_using_Named_Grid_Lines">named grid lines</a> declared in <code>grid-template-columns</code>. Appending <code>-start</code> and <code>-end</code> creates a named area (or <a href="https://drafts.csswg.org/css-values-4/#custom-idents">custom-ident</a>) that can be referenced in a child element&rsquo;s <code>grid-column</code> property. When applied, an element will span the area between these two lines.</p>

<ul>
<li><code>content</code> becomes an identifier for the page content area. It will fill the second column of the grid and is the same as declaring <code>grid-column: 2</code>.</li>
<li>The <code>full</code> identifier stretches across all the columns. This is equal to <code>grid-column: 1 / -1</code>.</li>
</ul>

<p>This approach removes the need for a &ldquo;full-bleed&rdquo; utility class on HTML elements. Instead, <code>full</code> and <code>content</code> become reusable values in the CSS for child elements when <code>grid-column</code> is declared. If the columns template should change at all (adding additional values, adjusting sizes) the named areas stay the same.</p>

<h2>Creating the gallery styles</h2>

<p>With the page layout finished, we can move on to the gallery component, starting on the top-level gallery element:</p>

<pre class="chroma language-css"><code>.<span style="color:#a6e22e">gallery</span> {
  <span style="color:#66d9ef">grid-column</span>: full;
  <span style="color:#66d9ef">display</span>: <span style="color:#66d9ef">grid</span>;
  <span style="color:#66d9ef">grid-template-columns</span>: <span style="color:#66d9ef">inherit</span>;
  padding-block: <span style="color:#a6e22e">var</span>(<span style="color:#f92672">-</span><span style="color:#f92672">-</span>gap);
  <span style="color:#66d9ef">overflow-x</span>: <span style="color:#66d9ef">scroll</span>;
  overscroll-behavior-x: <span style="color:#66d9ef">contain</span>;
  <span style="color:#66d9ef">scroll-snap-type</span>: x <span style="color:#66d9ef">mandatory</span>;
  scrollbar-width: <span style="color:#66d9ef">none</span>;
}
</code></pre>

<dl>
<dt>This is where scroll behavior and scroll snapping are handled, as well as stretching the viewport width. It inherits the <code>grid-columns-template</code> from the parent grid, acquiring the same column values and named grid lines.</dt>
<dt>::: callout
<code>inherit</code> works as expected since the gallery spans the full row of the parent grid, so its column dimensions match. However, its grid is independent of the parent one, unlike <code>subgrid</code> which allows nested elements to utilize the parent grid. <a href="https://www.annalytic.com/css-subgrid-vs-nested-grid.html">This article</a> by Anna Monus explains it well. <a href="https://www.smashingmagazine.com/2022/03/new-css-features-2022/#subgrid">CSS Subgrid</a> support is very low at the time of writing.
:::</dt>
</dl>

<p>In browser developer tools, we can enable layout grid lines visually and get a sense of how it&rsquo;s all working. I&rsquo;m using Chrome dev tools in the screenshot below but Firefox and Safari share similar steps.</p>

<ul>
<li>Open the <em>Layout</em> panel and select &ldquo;Show line names&rdquo; from the <em>Overlay display settings</em> dropdown.</li>
<li>In the <em>Elements</em> panel, click on the <code>grid</code> pills to the right of the main content and gallery elements to toggle their grid line visibility.</li>
</ul>

<p>{% image &ldquo;./public/images/gallery-grid-lines.png&rdquo;, &ldquo;Screenshot of dev tools showing the overlap of the gallery&rsquo;s grid lines on top of the parent container&rsquo;s grid lines.&rdquo;, &ldquo;Dev tools can be used to visualize the overlap of the gallery&rsquo;s grid lines on top of the parent container&rsquo;s grid lines.&rdquo; %}</p>

<h3>The inner wrapper</h3>

<p>In order to align the initial project item to the page content area, a wrapper element surrounds the project items and has <code>grid-column: content</code> declared. Remember that the gallery inherits <code>grid-template-column</code> from its parent so the named area identifiers are available.</p>

<pre class="chroma language-css"><code>.<span style="color:#a6e22e">gallery</span> .<span style="color:#a6e22e">wrapper</span> {
  <span style="color:#66d9ef">grid-column</span>: <span style="color:#66d9ef">content</span>;
  <span style="color:#66d9ef">display</span>: <span style="color:#66d9ef">flex</span>;
  <span style="color:#66d9ef">align-items</span>: <span style="color:#66d9ef">center</span>;
  <span style="color:#66d9ef">gap</span>: <span style="color:#a6e22e">var</span>(<span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#66d9ef">space</span>);
}

.<span style="color:#a6e22e">gallery</span> .<span style="color:#a6e22e">wrapper</span>::<span style="color:#a6e22e">after</span> {
  <span style="color:#66d9ef">content</span>: <span style="color:#e6db74">&#34;&#34;</span>;
  <span style="color:#66d9ef">align-self</span>: <span style="color:#66d9ef">stretch</span>;
  padding-inline-end: <span style="color:#a6e22e">max</span>(
    <span style="color:#a6e22e">var</span>(<span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#66d9ef">space</span>),
    (<span style="color:#ae81ff">100</span><span style="color:#66d9ef">vw</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">var</span>(<span style="color:#f92672">-</span><span style="color:#f92672">-</span>content<span style="color:#f92672">-</span>max<span style="color:#f92672">-</span>width)) <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">var</span>(<span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#66d9ef">space</span>)
  );
}
</code></pre>

<p>A flex display is applied to the wrapper so that its children line up in a single row. The <code>gap</code> property adds the gutters between each child.</p>

<p>The wrapper also introduces a pseudo element as a spacer after the last project item to keep it from stopping right on the viewport edge. To make my original spacer code even better, Maarten Bruggink shared <a href="https://twitter.com/maartenbruggink/status/1422641189732462594?s=20&amp;t=05DWyNWsJX9CLrq9GQPuKQ">a fantastic suggestion</a> that supports scrolling until the last element aligns to the right side of the page content area, even on larger screensizes. üëè</p>

<h3>The projects</h3>

<p>Adding <code>flex-shrink: 0</code> on project items keeps them from collapsing to fit within the gallery wrapper. I&rsquo;ve applied a combination of inline-sizing and aspect-ratio to projects in this demo so that they share the same responsive dimensions. It&rsquo;s not required though! Depending on what the gallery intends to accomplish, some project items could be wider, some tighter, and the layout would work as you&rsquo;d expect. In the <a href="#codepen-demo">CodePen demo</a>, scroll down a bit for an example.</p>

<h2>A fun scroll snap tidbit</h2>

<p>Something that I found really interesting: <code>scroll-snap-align</code> can be declared on nested elements! Notice that <code>scroll-snap-align: center</code> is set on project items. Although, while this works nicely for the <code>center</code> value, the result is not what you might hope for when using <code>start</code> or <code>end</code>. The elements are aligning to the scroll container edges of the gallery, which handles the scroll snap positioning, not the wrapper.</p>

<h2>Reverse scroll direction</h2>

<p>Scroll direction is handled quite gracefully. For languages that read from right to left, project items will be flipped appropriately thanks to their parent wrapper&rsquo;s flexbox display. The first item aligns to the right edge of the page content area and the gallery scrolls in from the left. Check the <a href="#codepen-demo">CodePen demo</a> for an example of this further down the page.</p>

<p>For more information on this, <a href="https://rtlstyling.com/">RTL Styling 101</a> is an excellent guide. I recommend the <a href="https://rtlstyling.com/posts/rtl-styling#flexbox-layout-module">Flexbox Layout Module</a> section to learn more about flexbox and right-to-left styling.</p>

<h2>CSS is awesome</h2>

<p>CSS Grid and Flexbox open the doors to so many layout patterns that, not long ago, were nothing but impossible to produce without leaning into JavaScript. There are so many more exciting <a href="https://www.smashingmagazine.com/2022/03/new-css-features-2022/">new features coming</a> to CSS that will continue to push the boundaries of what we can create. If <a href="https://css-tricks.com/css-cascade-layers/">CSS Cascade Layers</a> are any indication, browser teams are working hard on implementing these features faster than ever.</p>

<h2>Helpful resources</h2>

<ul>
<li><a href="https://www.bram.us/2021/05/06/css-full-bleed-scroll-snapping-carousel-with-visible-overflow/">CSS Full-Bleed Scroll-Snapping Carousel with Centered Content and Visible Overflow</a></li>
<li><a href="https://www.joshwcomeau.com/css/full-bleed/">Full-Bleed Layout Using CSS Grid</a></li>
<li><a href="/blog/project-keyboard-navigation/">A Horizontal Scroll List and Custom Keyboard Navigation</a></li>
<li><a href="https://web.dev/min-max-clamp/">min(), max(), and clamp(): three logical CSS functions to use today</a></li>
<li><a href="https://www.annalytic.com/css-subgrid-vs-nested-grid.html">CSS subgrid vs nested grid ‚Äî are they the same?</a></li>
<li><a href="https://rtlstyling.com/">RTL Styling 101</a></li>
</ul>
<p class="cta arrow-start" style="--flow-space: var(--space-l)">
  <a href="/blog/">Back to all blog posts</a>
</p>
<style>
  :is(.post-timer, .title) {
    --flow-space: 0;
    grid-row: 2;
  }

  .title {
    margin-block-end: 8vh;
  }

  .info {
    order: -1;
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem 1.5rem;
    margin-inline-start: 0.5rem;
    margin-block: 0 1em;
  }

  .info > * {
    align-items: center;
    display: flex;
    gap: 0.2rem;
    line-height: 1.2;
    font-size: 0.8em;
    padding: 0.1rem var(--space-2xs) 0.1rem 0;
  }

  .info svg {
    --_size: 1.75em;
    flex-shrink: 0;
    margin-inline-start: calc(var(--_size) / -2);
    width: var(--_size);
    height: var(--_size);
  }
</style></main>
    <footer class="breakout site-footer">
      <p class="copyright">
        
    ¬©         <strong>Ryan Mulligan</strong>
         from day one to this magic moment in
            <span></span>
      </p>
      <p>
        
    Assembled with a boundless affinity for the web
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentcolor" viewBox="0 0 256 256">
  <path d="M240,94c0,70-103.79,126.66-108.21,129a8,8,0,0,1-7.58,0C119.79,220.66,16,164,16,94A62.07,62.07,0,0,1,78,32c20.65,0,38.73,8.88,50,23.89C139.27,40.88,157.35,32,178,32A62.07,62.07,0,0,1,240,94Z"></path>
</svg>      </p>
      <ul class="cluster" style="--gap: var(--space-2xs)" role="list">
        <li>
          <a href="/">Home</a>
        </li>
        <li>
          <a href="/blog/">Blog</a>
        </li>
        <li>
          <a href="/feed.xml">RSS</a>
        </li>
        <li>
          <a href="/blogroll/">Blogroll</a>
        </li>
        <li>
          <a href="https://github.com/hexagoncircle/ryan-mulligan-dev/issues/new" target="_blank">Report an issue</a>
        </li>
      </ul>
    </footer>
    <style>
.site-footer {
  position: sticky;
  top: 100vh;
  padding-block: var(--space-2xl);
  font-size: 0.75em;
}
.site-footer p {
  text-wrap: balance;
}
.site-footer .copyright {
  margin-inline-start: -0.1em;
}
.site-footer .icon {
  --_size: 1.2em;
  position: relative;
  top: 0.2em;
  margin-inline: 0.1em;
  width: var(--_size);
  height: var(--_size);
  color: red;
}
.site-footer li {
  display: flex;
  align-items: center;
  gap: 0.2em;
}
</style>
    <script></script>
    <script async="" defer="" src="https://scripts.withcabin.com/hello.js"></script>
  </body>
</html>
